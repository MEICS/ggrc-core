-#
-# Copyright (C) 2013 Google Inc., authors, and contributors <see AUTHORS file>
-# Licensed under http://www.apache.org/licenses/LICENSE-2.0 <see LICENSE file>
-# Created By: brad@reciprocitylabs.com
-# Maintained By: brad@reciprocitylabs.com
-#
!!! 5

%html{ lang:"en" }
  %head
    %meta{ content:"text/html; charset=utf-8", 'http-equiv':"Content-Type" }
    %meta{ charset:"utf-8" }
    %meta{ content: "width=device-width, initial-scale=1.0", name: "viewport" }
    -#FIXME: (?) META tags for author, description

    %title
      -block title
        Governance, Risk and Compliance

    %script{ 'type': 'text/javascript' }
      GGRC = window.GGRC || {};
      -block extra_javascript

    -assets "dashboard-css"
      %link{ rel:'stylesheet', type:'text/css', href:"={ASSET_URL|with_static_subdomain}" }
    -endassets

    -assets "dashboard-js"
      %script{ type:'text/javascript', src:"={ASSET_URL|with_static_subdomain}" }
    -endassets

    -assets "dashboard-js-templates"
      %script{ type:'text/javascript', src:"={ASSET_URL|with_static_subdomain}" }
    -endassets

    -#FIXME: (?) HTML5 shim?

    -#csrf_meta_tag

    %link{ 'href': '={ url_for("static", filename="favicon.ico") }', 'rel':'icon', 'type':'image/x-icon' }

    -# Google Web Font(s)
    -#NOTE: This resource occasionally hangs and prevents page from rendering, so loaded after the fact via jquery
    :javascript
      jQuery(function($) { $('head').append("<link href='https://fonts.googleapis.com/css?family=Titillium+Web' rel='stylesheet' type='text/css'></link>"); });

      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','_gaTracker');

     // Please modify Google analytics tracker ID starting with UA and host name 
     // Uncomment _gaTracker to enable Google analytics tracker
     // _gaTracker('create', 'UA-XXXX-X', 'Enter Hostname for tracking');
     // _gaTracker('send', 'pageview');

      GGRC.Tracker_pending_events={};

      GGRC.Tracker_start = function(category, action) {
       GGRC.Tracker_pending_events[category] = Date.now();
      }

      GGRC.Tracker_stop = function(category, action) {
       // _gaTracker('send', 'event', category, action, 'elapsedTime', Date.now() - GGRC.Tracker_pending_events[category]);
       delete GGRC.Tracker_pending_events[category];
      }

      GGRC.Tracker_once = function(category, action) {
       _gaTracker('send', 'event', category, action, 'elapsedTime', Date.now()); 
      }

    -#%link{ 'href': "http://fonts.googleapis.com/css?family=PT+Sans", :rel => "stylesheet", :type => "text/css" }

  -block body
