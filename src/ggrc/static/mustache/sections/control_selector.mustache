{{!
    Copyright (C) 2013 Google Inc., authors, and contributors <see AUTHORS file>
    Licensed under http://www.apache.org/licenses/LICENSE-2.0 <see LICENSE file>
    Created By: brad@reciprocitylabs.com
    Maintained By: brad@reciprocitylabs.com
}}

<div class="modal-header">
  <h2>
    Map {{model.title_plural}} to <small>{{section.slug}}</small>
    <i class="grcicon-section"></i><i class="grcicon-reg-map-white"></i><i class="grcicon-{{model.table_singular}}"></i>
  </h2>
</div>


<div class="modal-filter">
    <div class="row-fluid">
      <div class="span3">
        &nbsp;
      </div>
      <div class="span6">
        <div class="span7">
          <div class="modal-search">
            &nbsp;
            <!--
            <a class="btn btn-mini search-reset" href="javascript://">
              <i class="grcicon-x-grey"></i>
            </a>
            <input class="input-block-level widgetsearch-tocontent clear-value" placeholder="Search {{model.title_plural.toLowerCase}}" type="text" />
          -->
          </div>
        </div>
        <div class="span5 checkbox-filter">
          <input type="checkbox" id="control-type-filter" class="control-type-filter inline pull-right" checked="checked"/>
          <label class="inline pull-right" for="control-type-filter">{{model.title_plural}} for this {{parent_subtype}} only:</label>
        </div>
      </div>
      <div class="span3">
        <div class="pull-right">
          <a class="btn btn-add" data-dirty="#controls, #combo" href="/controls/new?{{parent_type}}_id={{parent_id}}" data-modal-class="modal-wide" data-toggle="modal-ajax-form" rel="tooltip" data-original-title="Create New {{model.title_singular}}">
            <i class="grcicon-add"></i>
            {{model.title_singular}}
          </a>
        </div>
      </div>
    </div>
  </div>

<div class="modal-content" data-section-id="{{section.id}}">
    <div class="row-fluid">
      {{#section}}
      <div class="span3">
        <div class="selector-info selector-info-left">
          <h4>
            <i class="grcicon-section-color"></i>
            {{title}}
          </h4>
          <p class="code governance">{{slug}}</p>
          <div class="rtf">
            {{{description}}}
          </div>
          <h5>
            Already Mapped {{model.title_plural}} ({{list.length}})
          </h5>
          {{#if list.length}}
            <ul class="linked-controls">
              {{#list}}
              <li data-model="true" data-id="{{id}}" {{data 'model'}} data-object-type="{{class.table_singular}}">
                <a href="javascript://" class="jump-to-control">
                  {{#with this}}
                    {{! careful to avoid using the section's title or slug here, especially when the controls haven't loaded yet }}
                    <span>{{title}}</span>
                    <small>{{slug}}</small>
                  {{/with}}
                </a>
              </li>
              {{/list}}
            </ul>
          {{else}}
            <ul class="linked-controls">
              <li class="not-applicable">
                <strong>No {{model.title_plural.toLowerCase}} are currently mapped</strong>
              </li>
            </ul>
          {{/if}}
        </div>
      </div>
      {{/section}}
      <div class="span6">
        <div class="search-title">
          <div class="row-fluid">
            <div class="span6">
              <h4>
                Search Results <span class="search-results-count">0</span>
              </h4>
            </div>
            <div class="span6">
              <div class="guide">map/unmap</div>
            </div>
          </div>
        </div>
        {{! this is filled in with the controls controller}}
        <div class="content controls-list selector-list source" data-list-data-href="/controls.json"/>
        
      </div>
      <div class="span3">
        <div class="selector-info selector-info-right control">
          {{!this is filled in with the selected control controller}}
        </div>
      </div>
    </div>
  </div>

<div class="modal-footer">
  <div class="row-fluid">
    <nav class="span6">
      <!-- <input class="btn btn-large btn-info closebtn" name="commit" type="button" value="Cancel"> -->
    </nav>
    <nav class="span6">
      <div class="confirm-buttons">
        <div class="btn closebtn btn-primary" data-dismiss="modal"> Done </div>
      </div>
    </nav>
  </div>
</div>

